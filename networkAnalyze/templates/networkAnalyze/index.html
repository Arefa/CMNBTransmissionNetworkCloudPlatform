{% extends 'networkAnalyze/base.html' %}
{% load staticfiles %}

{% block title %}主页{% endblock %}

{% block appbarli %}
    <li><a href="/networkAnalyze/upload/"><span class="mif-question icon"></span>&nbsp;结构评估</a></li>
    <li><a href=""><span class="mif-loop2 icon"></span>&nbsp;同路由识别</a></li>
    <li>
        <a href="" class="dropdown-toggle"><span class="mif-help icon"></span>&nbsp;帮助</a>
        <ul class="d-menu" data-role="dropdown">
            <li><a href=""><span class="mif-books icon"></span>&nbsp;使用指南</a></li>
            <li><a href=""><span class="mif-organization icon"></span>&nbsp;贡献者</a></li>
            <li class="divider"></li>
            <li><a href=""><span class="mif-info icon"></span>&nbsp;关于</a></li>
        </ul>
    </li>
{% endblock %}

{% block contents %}
    <div id="map" style="width: 100%;height: 100%;">
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'networkAnalyze/js/echarts.js' %}"></script>
    <script type="text/javascript">
    var allData =
    {
        "citys": [{
            "name": "宁波市奉化区FH尚田汇聚",
            "value": [121.405615, 29.624757, 1],
            "symbolSize": 8,
            "itemStyle": {"normal": {"color": "#F58158"}}
        },
            {
                "name": "宁波市慈溪市CX山前汇聚",
                "value": [121.420283, 30.204619, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波市镇海区ZH行政服务中心东",
                "value": [121.598611, 29.964722, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波市象山县XS茅洋汇聚",
                "value": [121.828857, 29.387828, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波市余姚市四明山汇聚",
                "value": [121.120794, 29.741759, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波江北妙山汇聚",
                "value": [121.425236, 30.007401, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波市宁海县马岙汇聚站",
                "value": [121.247693, 29.377490, 1],
                "symbolSize": 6,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波天宁",
                "value": [121.541337, 29.876557, 1],
                "symbolSize": 10,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波市北仑区BL北仑电厂",
                "value": [121.815856, 29.933736, 1],
                "symbolSize": 4,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波院士路",
                "value": [121.624911, 29.877987, 1],
                "symbolSize": 10,
                "itemStyle": {"normal": {"color": "#F58158"}}
            },
            {
                "name": "宁波鄞县",
                "value": [121.524173, 29.822645, 8],
                "symbolSize": 10,
                "itemStyle": {"normal": {"color": "#F58158"}}
            }],
        "moveLines": [{
            "fromName": "宁波院士路",
            "toName": "宁波天宁",
            "coords": [[121.624911, 29.877987], [121.541337, 29.876557]]
        },
            {
                "fromName": "宁波院士路",
                "toName": "宁波鄞县",
                "coords": [[121.624911, 29.877987], [121.524173, 29.822645]]
            },
            {
                "fromName": "宁波市象山县XS茅洋汇聚",
                "toName": "宁波市奉化区FH尚田汇聚",
                "coords": [[121.828857, 29.387828], [121.405615, 29.624757]]
            },
            {
                "fromName": "宁波市宁海县马岙汇聚站",
                "toName": "宁波市象山县XS茅洋汇聚",
                "coords": [[121.247693, 29.377490], [121.828857, 29.387828]]
            },
            {
                "fromName": "宁波市慈溪市CX山前汇聚",
                "toName": "宁波市余姚市四明山汇聚",
                "coords": [[121.420283, 30.204619], [121.120794, 29.741759]]
            },
            {
                "fromName": "宁波市镇海区ZH行政服务中心东",
                "toName": "宁波市北仑区BL北仑电厂",
                "coords": [[121.598611, 29.964722], [121.815856, 29.933736]]
            },
            {
                "fromName": "宁波江北妙山汇聚",
                "toName": "宁波天宁",
                "coords": [[121.425236, 30.007401], [121.541337, 29.876557]]
            },
            {
                "fromName": "宁波市余姚市四明山汇聚",
                "toName": "宁波院士路",
                "coords": [[121.120794, 29.741759], [121.624911, 29.877987]]
            },
            {
                "fromName": "宁波市宁海县马岙汇聚站",
                "toName": "宁波鄞县",
                "coords": [[121.247693, 29.377490], [121.524173, 29.822645]]
            },
            {
                "fromName": "宁波院士路",
                "toName": "宁波市北仑区BL北仑电厂",
                "coords": [[121.624911, 29.877987], [121.815856, 29.933736]]
            },
            {
                "fromName": "宁波院士路",
                "toName": "宁波市慈溪市CX山前汇聚",
                "coords": [[121.624911, 29.877987], [121.420283, 30.204619]]
            },
            {
                "fromName": "宁波天宁",
                "toName": "宁波鄞县",
                "coords": [[121.541337, 29.876557], [121.524173, 29.822645]]
            },
            {
                "fromName": "宁波江北妙山汇聚",
                "toName": "宁波市镇海区ZH行政服务中心东",
                "coords": [[121.425236, 30.007401], [121.598611, 29.964722]]
            },
            {
                "fromName": "宁波院士路",
                "toName": "宁波市奉化区FH尚田汇聚",
                "coords": [[121.624911, 29.877987], [121.405615, 29.624757]]
            }]
    };

$.getJSON("{% static 'networkAnalyze/js/ningbo.json' %}", function (dataa) {
    echarts.registerMap('ningbo', dataa);
    var chart = echarts.init(document.getElementById('map'));
    chart.setOption({
        backgroundColor: '#404a59',
        title: {
            text: '朴姓人口迁徙图',
            left: 'center',
            textStyle: {
                color: '#fff'
            }
        },
        legend: {
            show: false,
            orient: 'vertical',
            top: 'bottom',
            left: 'right',
            data: ['地点', '线路'],
            textStyle: {
                color: '#fff'
            }
        },
        geo: {
            map: 'ningbo',
            label: {
                emphasis: {
                    show: false
                }
            },
            roam: true,
            itemStyle: {
                normal: {
                    areaColor: '#323c48',
                    borderColor: '#404a59'
                },
                emphasis: {
                    areaColor: '#2a333d'
                }
            }
        },
        series: [{
            name: '地点',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            zlevel: 2,
            rippleEffect: {
                brushType: 'stroke'
            },
            label: {
                emphasis: {
                    show: true,
                    position: 'right',
                    formatter: '{b}'
                }
            },
            symbolSize: 2,
            showEffectOn: 'render',
            itemStyle: {
                normal: {
                    color: '#46bee9'
                }
            },
            data: allData.citys
        }, {
            name: '线路',
            type: 'lines',
            coordinateSystem: 'geo',
            zlevel: 2,
            large: true,
            effect: {
                show: true,
                constantSpeed: 30,
                symbol: 'pin',
                symbolSize: 3,
                trailLength: 0,
            },
            lineStyle: {
                normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0, color: '#58B3CC'
                    }, {
                        offset: 1, color: '#F58158'
                    }], false),
                    width: 1,
                    opacity: 0.8,
                    curveness: 0.1
                }
            },
            data: allData.moveLines
        }]
    })
});




    </script>
{% endblock %}


